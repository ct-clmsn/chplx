#
# This program file was generated by the chplx compiler.
# The original Chapel program file can be found here: "tup.chpl"
#
cmake_minimum_required(VERSION 3.19)
if(NOT CMAKE_BUILD_TYPE)
  set(CMAKE_BUILD_TYPE Debug CACHE STRING "Configuration type" FORCE)
endif()

project(tup)

add_executable(tup tup.cpp tup_driver.cpp)

set(CMAKE_CXX_STANDARD 20)
set(CXX_EXTENSIONS OFF)
set(CMAKE_CXX_STANDARD_REQUIRED YES)

if(NOT Chplx_DIR)
  message(FATAL_ERROR "Chplx_DIR variable undefined")
endif()

set_property(GLOBAL PROPERTY USE_FOLDERS ON)

find_package(fmt REQUIRED CONFIG)
find_package(HPX REQUIRED CONFIG)
find_package(Chplx REQUIRED CONFIG)

target_link_libraries(tup PUBLIC fmt::fmt-header-only HPX::hpx Chplx::library)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -march=native -finline-limit=1000")
